var WireJs=function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=n(e);function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c={name:"WireLink",functional:!0,props:{href:{type:String,required:!0},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},as:{type:String,default:"a"}},render:function(t,e){var n=e.props,o=e.data,i=e.children,a=n.data?n.data:{};return t(n.as,d(d({},o),{},{attrs:d(d({},o.attrs),{},{href:n.href}),on:d(d({},o.on||{}),{},{click:function(t){t.preventDefault(),e.parent.$store.state.ternoboWireApp.visit(n.href,a,n.method)}})}),i)}};function l(t,e,n,o,i,a,r,s,d,c){"boolean"!=typeof r&&(d=s,s=r,r=!1);const l="function"==typeof n?n.options:n;let u;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),o&&(l._scopeId=o),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,d(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=u):e&&(u=r?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),u)if(l.functional){const t=l.render;l.render=function(e,n){return u.call(n),t(e,n)}}else{const t=l.beforeCreate;l.beforeCreate=t?[].concat(t,u):[u]}return n}const u="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function p(t){return(t,e)=>function(t,e){const n=u?e.media||"default":t,o=f[n]||(f[n]={ids:new Set,styles:[]});if(!o.ids.has(t)){o.ids.add(t);let n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",e.media&&o.element.setAttribute("media",e.media),void 0===h&&(h=document.head||document.getElementsByTagName("head")[0]),h.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(n),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{const t=o.ids.size-1,e=document.createTextNode(n),i=o.element.childNodes;i[t]&&o.element.removeChild(i[t]),i.length?o.element.insertBefore(e,i[t]):o.element.appendChild(e)}}}(t,e)}let h;const f={};var m=l({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:{"ternobo-loading":this.loading},attrs:{id:"app"}},[this.loading?e("svg",{staticStyle:{height:"64px",width:"64px"},attrs:{version:"1",xmlns:"http://www.w3.org/2000/svg",width:"682.667",height:"682.667",viewBox:"0 0 512.000000 512.000000"}},[e("path",{staticStyle:{fill:"#757575"},attrs:{d:"M106.3 164.8l.3 89.7 2.6 10.6c3.3 13.5 9.5 29.8 15.2 40.2 17.1 31.5 45.8 57.5 78.5 71.2 8.6 3.6 21.6 7.8 28.5 9l3.6.7V277h-65v-2.3c0-1.2.6-4.5 1.4-7.2 3.9-14.8 13.9-25.6 28-30.5 4.9-1.7 8.4-2 20.9-2h15l-.6-12.5c-2-39.7-17.4-74.3-45.7-102.6-21.9-22-48.3-36.9-76.8-43.3l-6.3-1.4.4 89.6zM395.2 128.6c-21.8 6.4-38.3 14.6-55.4 27.4-18 13.5-33.5 31.7-43.7 51.1-5.2 9.9-11.1 23.9-11.1 26.4 0 1.3 4.1 1.5 28.6 1.5h28.6l-.7 4.7c-2.2 15-12.2 28.3-25.6 34.2-6.1 2.7-15.5 4.1-28.1 4.1H277v158.9l3.3-.6c23.8-4.5 52.5-19.1 73.3-37.2 25.6-22.2 44.6-56.5 50.5-90.9 1.8-10.7 1.9-16.8 1.9-96.8 0-67.7-.3-85.4-1.2-85.3-.7 0-5 1.1-9.6 2.5z"}})]):this._t("default")],2)},staticRenderFns:[]},(function(t){t&&t("data-v-37504ae2_0",{source:".ternobo-loading[data-v-37504ae2]{display:flex;height:100vh;width:100vh;justify-content:center;align-items:center}",map:void 0,media:void 0})}),{name:"AppLayout",props:["loading"]},"data-v-37504ae2",!1,void 0,!1,p,void 0,void 0),v=l({render:function(){var t=this.$createElement,e=this._self._c||t;return e(this.layout,{tag:"component",attrs:{loading:this.loading}},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[this.ready?e(this.componentInstance,this._b({tag:"component"},"component",this.propsToBind,!1)):this._e()],1)],1)},staticRenderFns:[]},void 0,{methods:{updateComponent:function(){var t=this;this.resolveComponent(this.component).then((function(e){t.componentInstance=e.default,null!=t.componentInstance.layout&&(t.layout=t.componentInstance.layout),t.componentInstance.props&&(t.propsToBind={},Array.isArray(t.componentInstance.props)?t.componentInstance.props.forEach((function(e){t.propsToBind[e]=t.data[e]})):Object.keys(t.componentInstance.props).forEach((function(e){t.propsToBind[e]=t.data[e]}))),t.$forceUpdate(),t.ready=!0}))}},data:function(){return{loading:!0,propsToBind:{},component:null,componentInstance:null,layout:m,ready:!1,data:{}}},created:function(){var t=this;axios.post("/ternobo-wire/get-data/"+this.dataToken).then((function(e){var n=e.data;t.data=n.data,t.component=n.component,t.$store.commit("updateShared",n.shared),t.$nextTick((function(){t.updateComponent()})),t.loading=!1})),this.$store.dispatch("loadUser"),this.$store.commit("setupApp",{data:this.data,app:this})},props:["dataToken","resolveComponent"]},void 0,!1,void 0,!1,void 0,void 0,void 0);function w(t){var e=window.location,n=document.createElement("a");return n.href=t,n.hostname==e.hostname&&n.port==e.port&&n.protocol==e.protocol}var g=function(){function t(e,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=e,this.data=n,window.history.replaceState({visitId:"wire"},"",window.location.href),window.addEventListener("popstate",(function(t){JSON.stringify(window.history.state)==JSON.stringify(o.createVisitId())&&o.visit(window.location.href,{},"get",!1)}))}return a(t,null,[{key:"getInstance",value:function(t){return t.$store.state.ternoboWireApp}}]),a(t,[{key:"getData",value:function(e){var n=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"get";return new Promise((function(s,d){var c=new CustomEvent("ternobo:navigate",{detail:{location:e}});o&&window.document.dispatchEvent(c),axios({method:r,data:a,url:e,headers:{"X-TernoboWire":!0}}).then((function(t){if(s(t.data.data),t.headers["x-ternobowire"]){i&&window.history.pushState(n.createVisitId(),"",e);var a=new CustomEvent("ternobo:loaded",{detail:{location:e}});o&&window.document.dispatchEvent(a)}})).catch((function(e){t.production||console.log(e),d(e)})).then((function(){if(o){var t=new CustomEvent("ternobo:finish",{detail:{location:e}});window.document.dispatchEvent(t)}s()}))}))}},{key:"reload",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=window.location.href,i=new CustomEvent("ternobo:navigate",{detail:{location:o}});window.document.dispatchEvent(i),axios({method:"GET",data:{options:n},url:o,headers:{"X-ReloadData":!0,"X-TernoboWire":!0}}).then((function(t){if(t.headers["x-ternobowire"]){e.app.$store.commit("updateShared",t.data.shared),e.loadComponent(t.data.component,t.data.data);var n=new CustomEvent("ternobo:loaded",{detail:{location:o}});window.document.dispatchEvent(n)}else window.location.reload()})).catch((function(e){t.production||console.log(e)})).then((function(){var t=new CustomEvent("ternobo:finish",{detail:{location:o}});window.document.dispatchEvent(t)}))}},{key:"visit",value:function(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];w(e)||window.open(e);var r=new CustomEvent("ternobo:navigate",{detail:{location:e}});window.document.dispatchEvent(r),axios({method:i,data:o,url:e,headers:{"X-TernoboWire":!0}}).then((function(t){if(t.headers["x-ternobowire"]){n.app.$store.commit("updateShared",t.data.shared),n.loadComponent(t.data.component,t.data.data),a&&window.history.pushState(n.createVisitId(),"",e);var o=new CustomEvent("ternobo:loaded",{detail:{location:e}});window.document.dispatchEvent(o)}else window.location=e})).catch((function(e){t.production||console.log(e)})).then((function(){var t=new CustomEvent("ternobo:finish",{detail:{location:e}});window.document.dispatchEvent(t)}))}},{key:"loadComponent",value:function(t,e){this.app.component=t,this.app.data=e,this.app.updateComponent()}},{key:"createVisitId",value:function(){return this.visitId={visitId:"wire"},this.visitId}}]),t}(),y={install:function(t){t.use(o.default),t.component("wire-link",c),t.directive("t-infinite-scroll",{bind:function(t,e,n){t.addEventListener("scroll",(function(n){t.scrollTop+t.clientHeight>=t.scrollHeight&&e.value()}))}}),t.directive("click-outside",{bind:function(t,e,n){document.body.addEventListener("click",(function(t){return n.context.$emit(e.expression,t)}))}})}};return t.TernoboWire=g,t.default=v,t.plugin=y,t.store=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:{},actions:{},mutations:{}},e=d(d({},t),{},{state:d(d({},t.state),{},{user:{},ternoboWireApp:null,shared:{}}),actions:d(d({},t.actions),{},{loadUser:function(t){axios.post("/ternobo-wire/get-user").then((function(e){t.commit("setUser",e.data.user);var n=new CustomEvent("ternobo:userloaded",{detail:{user:e.data.user}});window.document.dispatchEvent(n)}))},loadShared:function(t){axios.post("/ternobo-wire/get-shared").then((function(e){t.commit("updateShared",e.data.shared);var n=new CustomEvent("ternobo:sharedataloaded",{detail:{user:e.data.user}});window.document.dispatchEvent(n)}))}}),mutations:d(d({},t.mutations),{},{setUser:function(t,e){t.user=e},setupApp:function(t,e){t.ternoboWireApp=new g(e.app,e.data)},updateShared:function(t,e){t.shared=e}})});return new o.default.Store(e)},Object.defineProperty(t,"__esModule",{value:!0}),t}({},Vuex);