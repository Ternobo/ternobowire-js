var TernobowireJs=function(t,e,n){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=o(e),i=o(n);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,o,a,i,r,s,d,c){"boolean"!=typeof r&&(d=s,s=r,r=!1);const l="function"==typeof n?n.options:n;let p;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,a&&(l.functional=!0)),o&&(l._scopeId=o),i?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,d(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=p):e&&(p=r?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),p)if(l.functional){const t=l.render;l.render=function(e,n){return p.call(n),t(e,n)}}else{const t=l.beforeCreate;l.beforeCreate=t?[].concat(t,p):[p]}return n}const p="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function u(t){return(t,e)=>function(t,e){const n=p?e.media||"default":t,o=f[n]||(f[n]={ids:new Set,styles:[]});if(!o.ids.has(t)){o.ids.add(t);let n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",e.media&&o.element.setAttribute("media",e.media),void 0===h&&(h=document.head||document.getElementsByTagName("head")[0]),h.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(n),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{const t=o.ids.size-1,e=document.createTextNode(n),a=o.element.childNodes;a[t]&&o.element.removeChild(a[t]),a.length?o.element.insertBefore(e,a[t]):o.element.appendChild(e)}}}(t,e)}let h;const f={};var m=l({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:{"ternobo-loading":this.loading},attrs:{id:"app"}},[this.loading?e("div",{staticClass:"loading-container"},[e("svg",{staticStyle:{height:"64px",width:"64px"},attrs:{version:"1",xmlns:"http://www.w3.org/2000/svg",width:"682.667",height:"682.667",viewBox:"0 0 512.000000 512.000000"}},[e("path",{staticStyle:{fill:"#191919"},attrs:{d:"M106.3 164.8l.3 89.7 2.6 10.6c3.3 13.5 9.5 29.8 15.2 40.2 17.1 31.5 45.8 57.5 78.5 71.2 8.6 3.6 21.6 7.8 28.5 9l3.6.7V277h-65v-2.3c0-1.2.6-4.5 1.4-7.2 3.9-14.8 13.9-25.6 28-30.5 4.9-1.7 8.4-2 20.9-2h15l-.6-12.5c-2-39.7-17.4-74.3-45.7-102.6-21.9-22-48.3-36.9-76.8-43.3l-6.3-1.4.4 89.6zM395.2 128.6c-21.8 6.4-38.3 14.6-55.4 27.4-18 13.5-33.5 31.7-43.7 51.1-5.2 9.9-11.1 23.9-11.1 26.4 0 1.3 4.1 1.5 28.6 1.5h28.6l-.7 4.7c-2.2 15-12.2 28.3-25.6 34.2-6.1 2.7-15.5 4.1-28.1 4.1H277v158.9l3.3-.6c23.8-4.5 52.5-19.1 73.3-37.2 25.6-22.2 44.6-56.5 50.5-90.9 1.8-10.7 1.9-16.8 1.9-96.8 0-67.7-.3-85.4-1.2-85.3-.7 0-5 1.1-9.6 2.5z"}})]),this._v(" "),this._m(0)]):this._t("default")],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner",attrs:{role:"spinner"}},[e("div",{staticClass:"spinner-icon"})])}]},(function(t){t&&(t("data-v-63280e30_0",{source:"@-webkit-keyframes spinner-indicating{0%{transform:translateX(0);width:80px}50%{transform:translateX(190px);width:0}to{transform:translateX(0)}}@keyframes spinner-indicating{0%{transform:translateX(0);width:80px}50%{transform:translateX(190px)}100%{transform:translateX(-40px)}}",map:void 0,media:void 0}),t("data-v-63280e30_1",{source:".ternobo-loading[data-v-63280e30]{display:flex;height:100vh;width:100vw;justify-content:center;align-items:center}.loading-container[data-v-63280e30]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-bottom:120px}.spinner[data-v-63280e30]{width:212px;height:5px;direction:ltr;background:#fff;margin-top:40px;box-shadow:0 6px 20px rgba(0,0,0,.1);overflow:hidden;border-radius:2px}.spinner .spinner-icon[data-v-63280e30]{background:#191919;height:100%;border-radius:2px;transition:.7s all;width:80px;animation-name:spinner-indicating;animation-duration:2s;animation-timing-function:cubic-bezier(0,0,.2,1);animation-iteration-count:infinite}",map:void 0,media:void 0}))}),{name:"AppLayout",props:["loading"]},"data-v-63280e30",!1,void 0,!1,u,void 0,void 0),v=l({render:function(){var t=this.$createElement,e=this._self._c||t;return e(this.layout,{tag:"component",attrs:{loading:this.loading}},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[this.ready?e(this.componentInstance,this._b({ref:"pageInstance",tag:"component"},"component",this.propsToBind,!1)):this._e()],1)],1)},staticRenderFns:[]},void 0,{methods:{emitBeforeRouteLeave:function(t,e,n){this.$refs.pageInstance.$options.beforeRouteLeave(t,e,n,this.$refs.pageInstance)},emitbeforeRouteEnter:function(t,e){var n=this;return this.resolveComponent(this.component).then((function(o){n.destroyPage();var a=o.default,i=function(){n.loadPage(a)};a.beforeRouteEnter?n.componentInstance.beforeRouteEnter(t,e,i):i()}))},destroyPage:function(){this.$refs.pageInstance&&this.$refs.pageInstance.$destroy()},loadPage:function(t){var e=this;this.componentInstance=t,null!=this.componentInstance.layout&&(this.layout=this.componentInstance.layout),this.componentInstance.props&&(this.propsToBind={},Array.isArray(this.componentInstance.props)?this.componentInstance.props.forEach((function(t){e.propsToBind[t]=e.data[t]})):Object.keys(this.componentInstance.props).forEach((function(t){e.propsToBind[t]=e.data[t]}))),this.$forceUpdate(),this.ready=!0}},data:function(){return{loading:!0,propsToBind:{},component:null,componentInstance:null,layout:m,ready:!1,data:{}}},created:function(){var t=this;axios.post("/ternobo-wire/get-data/"+this.dataToken).then((function(e){var n=e.data;t.data=n.data,t.component=n.component,t.$store.commit("updateShared",n.shared),t.loading=!1,t.$store.dispatch("loadUser"),t.$store.commit("setupApp",{data:t.data,component:t.component,app:t})})).catch((function(){window.location.reload()}))},props:["dataToken","resolveComponent"]},void 0,!1,void 0,!1,void 0,void 0,void 0);function w(t){var e=window.location,n=document.createElement("a");return n.href=t,n.hostname==e.hostname&&n.port==e.port&&n.protocol==e.protocol}var g={name:"WireLink",functional:!0,props:{href:{type:String,required:!0},linkDisabled:{type:Boolean,default:!1},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},as:{type:String,default:"a"}},render:function(t,e){var n=e.props,o=e.data,a=e.children,i=n.data?n.data:{};return t(n.as,s(s({},o),{},{attrs:s(s({},o.attrs),{},{href:n.href}),on:s(s({},o.on||{}),{},{click:function(t){t.preventDefault(),e.props.linkDisabled||e.parent.$store.state.ternoboWireApp.visit(n.href,i,n.method)}})}),a)}},y={beforeRouteEnter:function(t,e,n){n()},beforeRouteLeave:function(t,e,n){n()}},b={install:function(t){t.use(a.default),t.mixin(y),t.component("wire-link",g),t.directive("t-infinite-scroll",{bind:function(t,e,n){t.addEventListener("scroll",(function(n){t.scrollTop+t.clientHeight>=t.scrollHeight&&e.value()}))}})}};function x(t){window.document.dispatchEvent(new CustomEvent("ternobo:navigate",{detail:{location:t}}))}function E(t){window.document.dispatchEvent(new CustomEvent("ternobo:loaded",{detail:{location:t}}))}function _(t){window.document.dispatchEvent(new CustomEvent("ternobo:finish",{detail:{location:t}}))}function k(){var t=new CustomEvent("ternobo:sharedataloaded",{detail:{user:response.data.user}});window.document.dispatchEvent(t)}function C(t){var e=new CustomEvent("ternobo:userloaded",{detail:{user:t}});window.document.dispatchEvent(e)}var S=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=e,this.data=o,this.page={component:n,data:o},window.history.replaceState(this.createVisitId(this.page),"",window.location.href),this.handleInitialPageVisit(),this.handlePopstate()}var e,n,o;return e=t,o=[{key:"getInstance",value:function(t){return t.$store.state.ternoboWireApp}}],(n=[{key:"handlePopstate",value:function(){var t=this;window.addEventListener("popstate",(function(e){var n=e.state;setTimeout((function(){"wire"==n.visitId&&(window.scrollTo(0,0),t.loadComponent(window.location.pathname,e.target.location.pathname,n.data.component,n.data.data))}),0)}))}},{key:"handleInitialPageVisit",value:function(){this.isBackForwardVisit()?this.handleBackForwardVisit(this.page):this.loadComponent(null,window.location.pathname,this.page.component,this.page.data)}},{key:"isBackForwardVisit",value:function(){return window.history.state&&window.performance&&window.performance.getEntriesByType("navigation").length>0&&"back_forward"===window.performance.getEntriesByType("navigation")[0].type}},{key:"handleBackForwardVisit",value:function(t){this.loadComponent(null,window.location.pathname,t.component,t.data)}},{key:"getData",value:function(e){var n=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"get";return new Promise((function(d,c){o&&x(e),i.default({method:s,data:r,url:e,headers:{"X-TernoboWire":!0,Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest"}}).then((function(t){d(t.data.data),t.headers["x-ternobowire"]&&(a&&n.pushState(e,t.data),o&&E(e))})).catch((function(e){t.production||console.log(e),c(e)})).then((function(){o&&_(e),d()}))}))}},{key:"reload",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=window.location.href;x(o),i.default({method:"GET",data:{options:n},url:o,headers:{"X-ReloadData":!0,"X-TernoboWire":!0}}).then((function(t){t.headers["x-ternobowire"]?(e.app.$store.commit("updateShared",t.data.shared),e.loadComponent(window.location.pathname,window.location.pathname,t.data.component,t.data.data),E(o)):window.location.reload()})).catch((function(e){t.production||console.log(e)})).then((function(){_(o)}))}},{key:"visit",value:function(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.app.emitBeforeRouteLeave(window.location.pathname,e,(function(){w(e)||window.open(e),x(e),i.default({method:a,data:o,url:e,headers:{"X-TernoboWire":!0,Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","Cache-Control":"no-cache, no-store, must-revalidate"}}).then((function(t){t.headers["x-ternobowire"]?(n.app.$store.commit("updateShared",t.data.shared),n.loadComponent(window.location.pathname,e,t.data.component,t.data.data),r&&n.pushState(e,t.data),E(e)):window.location=e})).catch((function(e){t.production||console.log(e)})).then((function(){_(e)}))}))}},{key:"pushState",value:function(t,e){window.scrollTo(0,0),this.page=e,window.history.pushState(this.createVisitId(e),"",t)}},{key:"replaceState",value:function(t,e){this.page=e,window.history.replaceState(e,"",t)}},{key:"loadComponent",value:function(t,e,n,o){return this.app.component=n,this.app.data=o,this.app.emitbeforeRouteEnter(e,t)}},{key:"createVisitId",value:function(t){return this.visitId={data:t,visitId:"wire"},this.visitId}}])&&d(e.prototype,n),o&&d(e,o),t}();return t.TernoboWire=S,t.default=v,t.plugin=b,t.store=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:{},actions:{},mutations:{}},e=s(s({},t),{},{state:s(s({},t.state),{},{user:{},ternoboWireApp:null,shared:{}}),actions:s(s({},t.actions),{},{loadUser:function(t){i.default.post("/ternobo-wire/get-user").then((function(e){t.commit("setUser",e.data.user),C(e.data.user)}))},loadShared:function(t){i.default.post("/ternobo-wire/get-shared").then((function(e){t.commit("updateShared",e.data.shared),k(e.data.shared)}))}}),mutations:s(s({},t.mutations),{},{setUser:function(t,e){t.user=e},setupApp:function(t,e){t.ternoboWireApp=new S(e.app,e.component,e.data)},updateShared:function(t,e){t.shared=e}})});return new a.default.Store(e)},Object.defineProperty(t,"__esModule",{value:!0}),t}({},Vuex,axios$1);